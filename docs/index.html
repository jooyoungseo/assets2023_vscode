<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.322">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="JooYoung Seo">
<meta name="author" content="Megan Rogge">

<title>Coding Non-Visually in Visual Studio Code: Collaboration Towards Accessible Development Environment for Blind Programmers</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="assets2023_vscode_files/libs/clipboard/clipboard.min.js"></script>
<script src="assets2023_vscode_files/libs/quarto-html/quarto.js"></script>
<script src="assets2023_vscode_files/libs/quarto-html/popper.min.js"></script>
<script src="assets2023_vscode_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="assets2023_vscode_files/libs/quarto-html/anchor.min.js"></script>
<link href="assets2023_vscode_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="assets2023_vscode_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="assets2023_vscode_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="assets2023_vscode_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="assets2023_vscode_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#sec-vscode_a11y" id="toc-sec-vscode_a11y" class="nav-link" data-scroll-target="#sec-vscode_a11y"><span class="header-section-number">2</span> Background: Visual Studio Code and Accessibility</a></li>
  <li><a href="#methods" id="toc-methods" class="nav-link" data-scroll-target="#methods"><span class="header-section-number">3</span> Methods</a>
  <ul class="collapse">
  <li><a href="#author-profiles-and-collaboration-context" id="toc-author-profiles-and-collaboration-context" class="nav-link" data-scroll-target="#author-profiles-and-collaboration-context"><span class="header-section-number">3.1</span> Author Profiles and Collaboration Context</a></li>
  <li><a href="#co-design-and-expert-review" id="toc-co-design-and-expert-review" class="nav-link" data-scroll-target="#co-design-and-expert-review"><span class="header-section-number">3.2</span> Co-Design and Expert Review</a></li>
  </ul></li>
  <li><a href="#co-designed-deliverables" id="toc-co-designed-deliverables" class="nav-link" data-scroll-target="#co-designed-deliverables"><span class="header-section-number">4</span> Co-Designed Deliverables</a>
  <ul class="collapse">
  <li><a href="#terminal-buffer" id="toc-terminal-buffer" class="nav-link" data-scroll-target="#terminal-buffer"><span class="header-section-number">4.1</span> Terminal Buffer</a></li>
  <li><a href="#git-diff-and-audio-cues" id="toc-git-diff-and-audio-cues" class="nav-link" data-scroll-target="#git-diff-and-audio-cues"><span class="header-section-number">4.2</span> Git Diff and Audio Cues</a></li>
  <li><a href="#verbosity-settings-and-help-menus" id="toc-verbosity-settings-and-help-menus" class="nav-link" data-scroll-target="#verbosity-settings-and-help-menus"><span class="header-section-number">4.3</span> Verbosity Settings and Help Menus</a></li>
  <li><a href="#accessibility-testing-initiative" id="toc-accessibility-testing-initiative" class="nav-link" data-scroll-target="#accessibility-testing-initiative"><span class="header-section-number">4.4</span> Accessibility Testing Initiative</a></li>
  </ul></li>
  <li><a href="#discussion-and-conclusion" id="toc-discussion-and-conclusion" class="nav-link" data-scroll-target="#discussion-and-conclusion"><span class="header-section-number">5</span> Discussion and Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.pdf"><i class="bi bi-file-pdf"></i>PDF (acm)</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Coding Non-Visually in Visual Studio Code: Collaboration Towards Accessible Development Environment for Blind Programmers</h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliations</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">JooYoung Seo <a href="mailto:jseo1005@illinois.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0002-4064-6012" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            School of Information Sciences, University of Illinois at Urbana-Champaign
          </p>
      </div>
      <div class="quarto-title-meta-contents">
    <p class="author">Megan Rogge <a href="mailto:megrogge@gmail.com" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Microsoft
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    <p>This paper delineates a fruitful collaboration between blind and sighted developers, aiming to augment the accessibility of Visual Studio Code (VSCode). Our shared journey is portrayed through examples drawn from our interaction with GitHub issues, pull requests, review processes, and insider’s releases, each contributing to an improved VSCode experience for blind developers. One key milestone of our co-design process is the establishment of an accessible terminal buffer, a significant enhancement for blind developers using VSCode. Other innovative outcomes include Git Diff audio cues, adaptable verbosity settings, intuitive help menus, and a targeted accessibility testing initiative. These tailored improvements not only uplift the accessibility standards of VSCode but also provide a valuable blueprint for open-source developers at large. Through our shared dedication to promoting inclusivity in software development, we aim for the strategies and successes shared in this paper to inspire and guide the open-source community towards crafting more accessible software environments.</p>
  </div>
</div>


</header>

<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>An integrated development environment (IDE) is an application that conveniently provides essential functions for the entire programming process, including source editing, compiling and interpreting, and debugging. IDEs have become an essential tool for not only software developers but also STEM engineers and data scientists in many fields to efficiently manage their computing environments <span class="citation" data-cites="altharBuildingIntelligentIntegrated2021 crossJGRASPIntegratedDevelopment2007 janssenPyironIntegratedDevelopment2019">[<a href="#ref-altharBuildingIntelligentIntegrated2021" role="doc-biblioref">3</a>,<a href="#ref-crossJGRASPIntegratedDevelopment2007" role="doc-biblioref">5</a>,<a href="#ref-janssenPyironIntegratedDevelopment2019" role="doc-biblioref">7</a>]</span>. However, blind developers<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> are not able to take advantage of the many features that graphical user interface (GUI)-based IDEs offer <span class="citation" data-cites="potluriCodeTalkImprovingProgramming2018">[<a href="#ref-potluriCodeTalkImprovingProgramming2018" role="doc-biblioref">12</a>]</span>. For example, syntax highlighting, code autocompletion and autosuggestion, diagnostics and linting, variable watches and breakpoints are underutilized even among experienced blind programmers, and many blind developers are still working manually with simple text like Notepad, along with runtime and compile terminals <span class="citation" data-cites="mealinExploratoryStudyBlind2012 albusaysElicitingProgrammingChallenges2016 albusaysInterviewsObservationBlind2017">[<a href="#ref-albusaysElicitingProgrammingChallenges2016" role="doc-biblioref">1</a>,<a href="#ref-albusaysInterviewsObservationBlind2017" role="doc-biblioref">2</a>,<a href="#ref-mealinExploratoryStudyBlind2012" role="doc-biblioref">9</a>]</span>. Behind this problem are intertwined issues of accessibility and learnability. Because different IDEs use different architectures and have different levels of accessibility compliance, blind developers face a new learning curve each time they use an IDE. Blind developers also face the additional challenge of learning the non-visual workaround of accessing an IDE with a screen reader <span class="citation" data-cites="mealinExploratoryStudyBlind2012">[<a href="#ref-mealinExploratoryStudyBlind2012" role="doc-biblioref">9</a>]</span>. Although there is a community of blind programmers called Program-L <span class="citation" data-cites="johnsonProgramLOnlineHelp2022">[<a href="#ref-johnsonProgramLOnlineHelp2022" role="doc-biblioref">8</a>]</span> where blind programmers help and support each other, IDEs remain a daunting barrier for blind people.</p>
<p>These difficulties are a major socio-technical barrier to blind developers reaching their full potential in the computing field and to social and professional participation. From the perspective of the social model <span class="citation" data-cites="oliverSocialModelDisability2013">[<a href="#ref-oliverSocialModelDisability2013" role="doc-biblioref">10</a>]</span>, which recognizes that an individual’s disability may stem from structures and cultures that sociotechnically limit their access rather than from physical, sensory, cognitive, or emotional issues, we can see that IDE accessibility issues are no longer a group-specific problem that blind people must endure, but a collective task for the technology community to reduce barriers together. Specifically, to address these issues, blind and sighted developers need to work together to understand the challenges that blind developers face in using IDEs and then collaboratively find ways to address those challenges. This perspective is consistent with the “interdependent framework” <span class="citation" data-cites="bennettInterdependenceFrameAssistive2018 degreefInterdependentVariablesRemotely2021">[<a href="#ref-bennettInterdependenceFrameAssistive2018" role="doc-biblioref">4</a>,<a href="#ref-degreefInterdependentVariablesRemotely2021" role="doc-biblioref">6</a>]</span> that other accessibility researchers have advocated to move away from the dependency of accessibility on the individual with disabilities and instead view accessibility as a shared responsibility of people with and without disabilities and the environment surrounding them.</p>
<p>This paper is the empirical product of blind and sighted developers who have thought deeply about these issues and actively collaborated. We describe how the first author, who is blind, and the second author, who is sighted, have been working together to make the open source IDE Visual Studio Code (VSCode) non-visually accessible and what specific accessibility features have been implemented as a result of our collaboration. In the following sections, we start with some background on how our collaboration began, then present our methods and deliverables. Finally, we’ll share some insights from our collaboration.</p>
</section>
<section id="sec-vscode_a11y" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Background: Visual Studio Code and Accessibility</h1>
<p>Visual Studio Code is a lightweight, free, and powerful open-source code editor<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> which runs on the desktop and on the web. It is available for Windows, macOS, and Linux. It has built-in support for JavaScript, TypeScript, and Node.js and a rich ecosystem of extensions for other languages and runtimes, such as C++, C#, Java, Python, PHP, Go, .NET, and more. Accessibility has been a core priority for VSCode since its inception. Among the many architectural elements of VSCode, the following, in particular, has contributed to its accessibility. First, VSCode is a cross-platform application built with the Chromium-based Electron Framework. In other words, VSCode is an application built using web technologies, which gives it the flexibility to follow web accessibility guidelines and respond to the accessibility of various screen readers and assistive technologies regardless of the operating system. Second, Monaco, the primary editor of VSCode, has its own screen reader compatibility mode, which is designed to be selectively turned on and off depending on the user’s intent. Third, Microsoft’s xterm.js terminal, used by VSCode, also provides a separate screen reader accessibility switch in accordance with the Web Accessibility Guidelines. Finally, VSCode is an open-source project where anyone can suggest and fix features on GitHub, and a daily insiders version is built so that real users can quickly use the alpha version and provide feedback to the developers, which in turn leads to a higher quality, user-centered stable version.</p>
<p>The accessibility benefits of VSCode and tips on how to take advantage of them have been shared among members of the Program-L mailing list, a community of blind programmers. In addition, due to its growing popularity among blind programmers, there has been a recent spate of research and development of accessible plug-ins based on VSCode <span class="citation" data-cites="potluriCodeWalkFacilitatingShared2022 stogerDesigningInclusiveAccessible2022">[<a href="#ref-potluriCodeWalkFacilitatingShared2022" role="doc-biblioref">11</a>,<a href="#ref-stogerDesigningInclusiveAccessible2022" role="doc-biblioref">15</a>]</span>. Nevertheless, the fact that VSCode is accessible compared to other IDEs does not necessarily mean that it is easy for blind programmers to use. For example, there is still a constant stream of questions on Program-L about VSCode, not only about its basic usage, but also about features that have already been made accessible in VSCode, such as the terminal, debugging, and the Jupyter Notebook extension, which suggests that many blind programmers are often frustrated by the tricky usability of VSCode accessibility. The following section describes how the authors of this paper collaborated to address this usability issue of VSCode accessibility.</p>
</section>
<section id="methods" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Methods</h1>
<section id="author-profiles-and-collaboration-context" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="author-profiles-and-collaboration-context"><span class="header-section-number">3.1</span> Author Profiles and Collaboration Context</h2>
<p>The first author of this paper is blind with only light perception, currently working as an assistant professor in the School of Information Sciences at the University of Illinois at Urbana-Champaign. At the university, he teaches introductory data science courses using R and Python to undergraduate and graduate students. As a lifelong non-visual programmer, he has experience with a variety of IDEs, including Visual Studio, Eclipse, and Net Bean, and text editors such as Emacs/Emacspeak, VIM, and NotePad++, on Linux, Mac, and Windows operating systems, using a variety of screen readers (e.g., JAWS, NVDA, Narrator, VoiceOver, and Orca) and refreshable braille displays. He is a certified professional in accessibility core competencies (CPACC) from the International Association of Accessibility Professionals and has contributed code to a number of open-source data science projects to improve screen reader accessibility, including RStudio IDE Server and the web-based data science dashboard Shiny, reproducible technical publishing systems (e.g., R Markdown, bookdown, and Quarto), and the data table package gt. He is also a member of Program-L. In this community, he has experienced first-hand the challenges that blind programmers face in using IDEs and how they overcome them by interacting with other blind programmers and participating in discussions. To improve these community-wide challenges, he created his first issue on the Microsoft VSCode public GitHub site on May 31, 2020, and has since created a total of 164 contributions (87 issues; 76 post comments and mentions; 1 pull request) to actively suggest usability improvements for blind programmers in VSCode and interact with other open source developers<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>The second author is a VSCode software engineer. She has worked on the product since graduating from the University of North Carolina at Chapel Hill in 2020 with the highest distinction and highest honors for her research and work with Dr.&nbsp;Gary Bishop on semi-automated gaming for users with a wide range of disabilities. About 10 months ago, Megan requested to take over responsibility for the product’s accessibility. Since then, she has been working closely with JooYoung and the community to understand accessibility issues and collaborate on solutions.</p>
</section>
<section id="co-design-and-expert-review" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="co-design-and-expert-review"><span class="header-section-number">3.2</span> Co-Design and Expert Review</h2>
<p>Our collaborative approach utilized the strategies of co-design and expert review. The co-design methodology fosters a joint creation process between the user and developer, enabling the developer to grasp the user’s requirements and, in turn, develop a product aligning with these needs <span class="citation" data-cites="sandersCocreationNewLandscapes2008">[<a href="#ref-sandersCocreationNewLandscapes2008" role="doc-biblioref">14</a>]</span>. In this framework, JooYoung acted as an expert, given his multi-faceted role as a daily VSCode user, an experienced open-source contributor, a data science educator, and an accessibility professional. He outlined his varied computing experiences to Megan and swiftly assessed his accessibility patches. Our communication began asynchronously via GitHub, debating on issues and potential solutions. Following a few weeks of this pattern, we mutually agreed that scheduled meetings could prove more efficient and productive. JooYoung’s wealth of ideas and insights complemented Megan’s eagerness to learn and her drive to enhance the product’s accessibility. In these sessions, JooYoung demonstrated his use of VS Code by sharing his screen on Zoom, posing queries, and suggesting alterations. Conversely, Megan provided her insights, questioned various aspects, and noted down bugs or features requiring attention. These exchanges facilitated Megan’s understanding of JooYoung’s usage of VS Code and enabled JooYoung to comprehend the product components, which could otherwise remain confusing or undiscovered.</p>
<p>Despite the implementation of regular meetings, asynchronous communication via GitHub and email persisted. Megan regularly composed follow-up emails encapsulating their meeting discoveries prior to circulating them to the entire VSCode team. JooYoung further scrutinized these issues, providing comments if anything was overlooked or during the fix-testing process.</p>
</section>
</section>
<section id="co-designed-deliverables" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Co-Designed Deliverables</h1>
<p>While nearly all VS Code accessibility fixes and features within the past year are products of this collaboration, below are several of the highlights.</p>
<section id="terminal-buffer" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="terminal-buffer"><span class="header-section-number">4.1</span> Terminal Buffer</h2>
<p>As discussed in <a href="#sec-vscode_a11y" class="quarto-xref">Section&nbsp;2</a>, xterm.js, the terminal UI utilized by VSCode, incorporates a screen-reader accessibility mode for blind people. However, a discernible gap emerged between accessibility (the ability to access information) and usability (the convenience of use), which led to recurring concerns among blind programmers.</p>
<p>Consider the following scenario: you type and execute the command <code>echo hello; echo world;</code> in the terminal. You will observe <code>hello</code> and <code>world</code> as two separate lines of output. The existing accessibility mode of xterm.js presented this content through a screen reader using an aria-live alert and permitted a line-by-line review of the terminal output history with the <code>Ctrl+UpArrow</code> and <code>Ctrl+DownArrow</code> keys. This worked well for short and simple outputs, but for lengthy outputs with intricate error messages or computational results, a swift speech-to-text message was insufficient for capturing substantial information in human working memory.</p>
<p>An additional concern is that <code>Ctrl+Up/DownArrow</code> navigation keys, designed to review terminal history, delivered the entire contents of the focused line to the screen reader as a single object. This made a detailed examination of terminal contents on a character or word basis challenging. Blind users had to switch the reading mode using the screen reader’s virtual cursor (i.e., browse mode in NVDA; QuickNav mode in VoiceOver) to review the terminal content more thoroughly. To resume terminal input, they had to disable the virtual cursor and return to forms mode (focus mode in NVDA; QuickNav off in VoiceOver), leading to significant inconvenience.</p>
<p>JooYoung initiated a discussion on the official Microsoft VSCode GitHub page, bringing attention to these issues and proposing solutions (see <a href="https://github.com/microsoft/vscode/issues/98918">microsoft/vscode#98918: Terminal output div container should be more accessible for screen readers</a>). Megan, meanwhile, developed terminal shell integration, a feature allowing VS Code to comprehend terminal activities, facilitating user-friendly command navigation, command output copying, and more. JooYoung demonstrated that the terminal buffer remained inaccessible for screen reader users, as it didn’t support arrow key navigation. He proposed that the output view’s accessible experience be integrated into the terminal. Upon discussing with a colleague, Megan incorporated the same underlying component into the terminal, making the previously inaccessible terminal buffer navigable via arrow keys for blind users. More specifically, he suggested replacing the terminal output with a text editor buffer supporting standard arrow-key navigation. The implementation, requiring over a year of technical experimentation and collaborative testing, yielded fruitful results. Initial efforts to redirect the terminal output web container, designated as “list”, to aria “document” or “textbox” landmarks proved unsatisfactory due to varying screen reader and platform support levels for aria. The terminal output was then converted into a text area with “contenteditable” and “read only” attributes, which also did not gel with the screen reader’s speech buffer. Eventually, we created a separate accessible terminal buffer by transferring the terminal output to VSCode’s native Monaco editor, ensuring optimal accessibility and usability for all blind users on all platforms and screen readers. This feature, well-received by many blind users in the Program-L community, was officially introduced in the VSCode stable version 1.75.</p>
<p>In Figure 1, a screenshot depicts the terminal accessible buffer in action. A screen reader is shown focusing on an error message from a task terminal and audibly announcing: “[watch-client ] [12:41:01] Error: /Users/meganrogge/Repos/ vscode/vscode/src/vs/workbench/contrib/accessibility/brow ser/accessibilityContributions.ts(198,63): ‘)’ expected.”. Users can navigate the displayed content using standard arrow keys without having to switch between different navigation modes.</p>
<div id="fig-buffer" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/terminal-accessible-buffer.png" class="img-fluid figure-img" alt="The terminal accessible buffer."></p>
<figcaption class="figure-caption">Figure&nbsp;1: The terminal accessible buffer.</figcaption>
</figure>
</div>
</section>
<section id="git-diff-and-audio-cues" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="git-diff-and-audio-cues"><span class="header-section-number">4.2</span> Git Diff and Audio Cues</h2>
<p>Git has been around for decades as a version control tool like SVN, but its popularity has really taken off with the rise of open-source social coding platforms based on Git, such as GitHub and GitLab. Naturally, there have been many personal and social needs for blind people to utilize Git in collaborative environments. Git is originally a Unix-based command-line tool, so in terms of accessibility, blind people can use a screen reader to fully utilize Git in a terminal. However, since Git has over 100 core Git commands, and the number of possible combinations could be in the millions, using Git via the command line takes a lot of effort and time to become proficient. In response, various tools have emerged that allow users to utilize Git as a GUI, and VSCode is a very popular IDE that supports a collaborative environment using Git.</p>
<p>Git’s <code>git diff</code> feature enables users to track changes and compare differences between files or commits in an asynchronous collaborative setting. Using this command, new additions are marked in green with a <code>+</code> prefix, while deletions appear in red with a <code>-</code> prefix. VSCode ensured that the <code>git diff</code> feature is accessible to screen reader users. When users had the desired files or commits open for comparison, they could quickly navigate to the differences using the <code>F7</code> key (Go to Next Difference) and <code>Shift+F7</code> (Go to Previous Difference). These differences were prefixed with a <code>+</code> or <code>-</code> sign to denote additions or deletions, respectively. Of course, this approach was fine from an accessibility standpoint, but there was room for improvement in terms of usability and convenience for blind users. For example, visual affordances like color coding and <code>+-</code> signs in <code>git diff</code> allowed sighted people to skim quickly, but blind people had to listen to additional speech prefixes, pronounced + (plus) and - (dash), serially and wait for information before each change. Furthermore, depending on the punctuation pronunciation settings of the screen reader, the +- sign could be omitted to the screen reader.</p>
<p>To ameliorate this, JooYoung suggested adding non-visual, non-speech, and audible affordances to <code>git diff</code> in addition to <code>+-</code> signs, so that blind people can hear and understand them easily (see <a href="https://github.com/microsoft/vscode/issues/147226">microsoft/vscode#147226</a>). Audio cues, often referred to as “earcons”, are non-speech sound effects that enhance accessibility. While VSCode and Microsoft’s Visual Studio have only recently started supporting them, their importance in non-visual programming was highlighted decades ago by TV Raman, a blind computer scientist. He introduced the concept of earcons as a counterpart to visual icons when he developed Emacspeak <span class="citation" data-cites="ramanEmacspeakSpeechInterface1996">[<a href="#ref-ramanEmacspeakSpeechInterface1996" role="doc-biblioref">13</a>]</span>. For example, audio cues allow the editor to quickly recognize if the current line of code contains an error or a warning, instead of just saying “error” or “warning” verbally, the editor will read out the unique sound associated with the error or warning. These sounds can also be delivered in parallel with text-to-speech information from a screen reader, allowing blind programmers to quickly perceive the context of the code, similar to the benefits of quickly scanning code with different color coding for those who receive visual feedback on code with their eyes. JooYoung had several Zoom meetings with Megan and Amnon Freidlin (Microsoft’s sound designer), and through an iterative process, finalized the three audio cues used in the <code>git diff</code> context. These were the diff line Inserted sound, which is heard when something new is added (<code>+</code>), the diff line Deleted sound, which is heard when something existing is removed (<code>-</code>), and the diff line Modified sound, which is heard when something existing is modified (<code>+-</code>, <code>-+</code>). Our success came with some trial and error. For example, an early problem was that the Diff Line Inserted and Diff Line Deleted sounds had a similar range and texture, making it difficult to distinguish between them. JooYoung realized that this was a common complaint in Program-L beyond his personal experience, so he worked with the sound designer to test and finalize a sample file that was as self-explanatory as possible and didn’t interfere with the sound of the screen reader speech. Of course, we had to leave the potential issue of the static audio cues we chose not being able to adequately accommodate users with hearing impairments in certain ranges as a future work in progress, but this feature greatly improved the usability of our non-visual programming.</p>
</section>
<section id="verbosity-settings-and-help-menus" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="verbosity-settings-and-help-menus"><span class="header-section-number">4.3</span> Verbosity Settings and Help Menus</h2>
<p>JooYoung created issues pointing out places where minor tweaks to the order or content of an aria-label could yield massive productivity improvements for screen reader users. Megan fixed some such instances and pointed team members toward others, providing guidance about best practices going forward. Megan started self-hosting with a screen reader shortly after this in order to proactively identify other problems. She felt overwhelmed by the noise and noticed some content was repeated ad nauseum, so created an issue and sought the feedback of JooYoung, who suggested that screen reader verbosity settings remedy this and a similar approach could be applied to VS Code’s aria content. Additionally, JooYoung shared that while it was helpful to meet and learn about the new features via our meetings, most screen reader users did not have this luxury. Megan and her colleague, Daniel, brainstormed about a discoverable way for screen reader users to find out about terminal features. Upon terminal focus, an aria-label conveyed how to access the terminal’s accessibility help menu. To reduce noise, this hint could be disabled with a verbosity setting. Since then, help menus and verbosity settings have been added for the Copilot inline and panel chat, notebook, and other features. For example, the terminal accessibility help menu contains important information for screen reader users such as commands to run like “Run Recent Command (Ctrl+R)” (Figure 2). A screen reader user can use arrow keys to read the content line by line, character by character.</p>
<div id="fig-help" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/terminal-help-menu.png" class="img-fluid figure-img" alt="The terminal help menu"></p>
<figcaption class="figure-caption">Figure&nbsp;2: The terminal help menu</figcaption>
</figure>
</div>
</section>
<section id="accessibility-testing-initiative" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="accessibility-testing-initiative"><span class="header-section-number">4.4</span> Accessibility Testing Initiative</h2>
<p>JooYoung consistently provided feedback on GitHub, highlighting issues with both old and new features in VS Code. His active engagement and insights were pivotal in spotlighting an overlooked area. Megan, a key accessibility member of the VSCode team, noticed that despite testing new features on every platform - MacOS, Linux, and Windows at the end of each month before a release, the screen reader experience had been neglected. Inspired by JooYoung’s observations, Megan advocated for a new protocol: after a feature is released, it will be tested with screen readers in the next iteration. Additionally, she initiated retroactive tests on features to rectify this historical oversight.</p>
</section>
</section>
<section id="discussion-and-conclusion" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Discussion and Conclusion</h1>
<p>In our collaborative journey, blending the expertise of both sighted and blind developers, we’ve unearthed pivotal insights about open-source accessibility. Our endeavors with Visual Studio Code serve as a case in point. Megan and JooYoung’s <a href="https://learn.microsoft.com/en-us/events/vs-code-day-2023/accessibilty-in-vs-code">livestream seminar</a> accentuated the profound impact of merging accessibility considerations with open-source development.</p>
<p>Open-source platforms are foundational in the tech realm. Our reach and influence cascade into multiple offshoot applications. Hence, embedding accessibility in these parent projects can have a magnified effect, promoting inclusivity across numerous derivative platforms. The participatory nature of open-source projects, welcoming feedback from a diverse array of users, is both a strength and a challenge. JooYoung’s collaboration, while external to Microsoft, highlights this open engagement. Yet, a pertinent concern is the potential marginalization of voices unfamiliar with platforms like GitHub. For open-source teams, this underscores the necessity to proactively engage with and seek feedback from these underrepresented communities. Such engagement is not just about hearing, but understanding and integrating feedback. The synergy between Megan and JooYoung exemplifies the potential outcomes when such engagements are cultivated. A recurring theme from our experience is the importance of proactive accessibility considerations. Post-design modifications often present challenges, emphasizing the need for early integration of accessibility measures. Drawing these threads together, our co-design experience underscores the imperative of fostering an inclusive ethos in open-source development. By ensuring a platform that is receptive to diverse voices, we can move closer to a universally accessible coding ecosystem.</p>
<div class="acks">
<p>We extend our gratitude to Program-L, an online community of blind programmers, for their invaluable feedback and testing of VS Code, as well as their insightful accessibility suggestions. We also appreciate the VS Code team for their commitment to accessibility. Special thanks to Isidor Nikolic, Kai Maetzel, and Daniel Imms for their dedication and invaluable insights; to Raymond Zhao and Roberto Perez for enhancing the site’s accessibility; to José Vilmar Estácio de Souza, Amnon Freidlin, Marie Robbins, and Gino Scarpino for their diligent testing and collaboration.</p>
</div>
</section>
<section id="references" class="level1 unnumbered">


</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="list">
<div id="ref-albusaysElicitingProgrammingChallenges2016" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">Khaled Albusays and Stephanie Ludi. 2016. Eliciting programming challenges faced by developers with visual impairments: Exploratory study. In <em>Proceedings of the 9th <span>International Workshop</span> on <span>Cooperative</span> and <span>Human Aspects</span> of <span>Software Engineering</span></em> (<span>CHASE</span> ’16), <span>Association for Computing Machinery</span>, <span>New York, NY, USA</span>, 82–85. DOI:https://doi.org/<a href="https://doi.org/10.1145/2897586.2897616">10.1145/2897586.2897616</a></div>
</div>
<div id="ref-albusaysInterviewsObservationBlind2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">Khaled Albusays, Stephanie Ludi, and Matt Huenerfauth. 2017. Interviews and <span>Observation</span> of <span>Blind Software Developers</span> at <span>Work</span> to <span>Understand Code Navigation Challenges</span>. In <em>Proceedings of the 19th <span>International ACM SIGACCESS Conference</span> on <span>Computers</span> and <span>Accessibility</span></em> (<span>ASSETS</span> ’17), <span>Association for Computing Machinery</span>, <span>New York, NY, USA</span>, 91–100. DOI:https://doi.org/<a href="https://doi.org/10.1145/3132525.3132550">10.1145/3132525.3132550</a></div>
</div>
<div id="ref-altharBuildingIntelligentIntegrated2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">Raghavendra Rao Althar and Debabrata Samanta. 2021. Building <span>Intelligent Integrated Development Environment</span> for <span>IoT</span> in the <span>Context</span> of <span>Statistical Modeling</span> for <span>Software Source Code</span>. In <em>Multimedia <span>Technologies</span> in the <span>Internet</span> of <span>Things Environment</span></em>, Raghvendra Kumar, Rohit Sharma and Prasant Kumar Pattnaik (eds.). <span>Springer</span>, <span>Singapore</span>, 95–115. DOI:https://doi.org/<a href="https://doi.org/10.1007/978-981-15-7965-3\_7">10.1007/978-981-15-7965-3\_7</a></div>
</div>
<div id="ref-bennettInterdependenceFrameAssistive2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">Cynthia L. Bennett, Erin Brady, and Stacy M. Branham. 2018. Interdependence as a <span>Frame</span> for <span>Assistive Technology Research</span> and <span>Design</span>. In <em>Proceedings of the 20th <span>International ACM SIGACCESS Conference</span> on <span>Computers</span> and <span>Accessibility</span></em> (<span>ASSETS</span> ’18), <span>Association for Computing Machinery</span>, <span>New York, NY, USA</span>, 161–173. DOI:https://doi.org/<a href="https://doi.org/10.1145/3234695.3236348">10.1145/3234695.3236348</a></div>
</div>
<div id="ref-crossJGRASPIntegratedDevelopment2007" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">James H. Cross and T. Dean Hendrix. 2007. <span class="nocase">jGRASP</span>: An integrated development environment with visualizations for teaching <span>Java</span> in <span>CS1</span>, <span>CS2</span>, and beyond. <em>Journal of Computing Sciences in Colleges</em> 23, 2 (December 2007), 170–172.</div>
</div>
<div id="ref-degreefInterdependentVariablesRemotely2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">Lilian De Greef, Dominik Moritz, and Cynthia Bennett. 2021. Interdependent <span>Variables</span>: <span>Remotely Designing Tactile Graphics</span> for an <span>Accessible Workflow</span>. In <em>The 23rd <span>International ACM SIGACCESS Conference</span> on <span>Computers</span> and <span>Accessibility</span></em>, <span>ACM</span>, <span>Virtual Event USA</span>, 1–6. DOI:https://doi.org/<a href="https://doi.org/10.1145/3441852.3476468">10.1145/3441852.3476468</a></div>
</div>
<div id="ref-janssenPyironIntegratedDevelopment2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[7] </div><div class="csl-right-inline">Jan Janssen, Sudarsan Surendralal, Yury Lysogorskiy, Mira Todorova, Tilmann Hickel, Ralf Drautz, and Jörg Neugebauer. 2019. Pyiron: <span>An</span> integrated development environment for computational materials science. <em>Computational Materials Science</em> 163, (June 2019), 24–36. DOI:https://doi.org/<a href="https://doi.org/10.1016/j.commatsci.2018.07.043">10.1016/j.commatsci.2018.07.043</a></div>
</div>
<div id="ref-johnsonProgramLOnlineHelp2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">Jazette Johnson, Andrew Begel, Richard Ladner, and Denae Ford. 2022. Program-<span>L</span>: <span>Online Help Seeking Behaviors</span> by <span>Blind</span> and <span>Low Vision Programmers</span>. In <em>2022 <span>IEEE Symposium</span> on <span>Visual Languages</span> and <span>Human-Centric Computing</span> (<span>VL</span>/<span>HCC</span>)</em>, IEEE, 1–6. DOI:https://doi.org/<a href="https://doi.org/10.1109/VL/HCC53370.2022.9833106">10.1109/VL/HCC53370.2022.9833106</a></div>
</div>
<div id="ref-mealinExploratoryStudyBlind2012" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">S. Mealin and E. Murphy-Hill. 2012. An exploratory study of blind software developers. In <em>2012 <span>IEEE Symposium</span> on <span>Visual Languages</span> and <span>Human-Centric Computing</span> (<span>VL</span>/<span>HCC</span>)</em>, <span>IEEE</span>, <span>Innsbruck</span>, 71–74. DOI:https://doi.org/<a href="https://doi.org/10.1109/VLHCC.2012.6344485">10.1109/VLHCC.2012.6344485</a></div>
</div>
<div id="ref-oliverSocialModelDisability2013" class="csl-entry" role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">Mike Oliver. 2013. The social model of disability: Thirty years on. <em>Disability &amp; Society</em> 28, 7 (October 2013), 1024–1026. DOI:https://doi.org/<a href="https://doi.org/10.1080/09687599.2013.818773">10.1080/09687599.2013.818773</a></div>
</div>
<div id="ref-potluriCodeWalkFacilitatingShared2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">Venkatesh Potluri, Maulishree Pandey, Andrew Begel, Michael Barnett, and Scott Reitherman. 2022. <span>CodeWalk</span>: <span>Facilitating Shared Awareness</span> in <span>Mixed-Ability Collaborative Software Development</span>. In <em>The 24th <span>International ACM SIGACCESS Conference</span> on <span>Computers</span> and <span>Accessibility</span></em>, <span>ACM</span>, <span>Athens Greece</span>, 1–16. DOI:https://doi.org/<a href="https://doi.org/10.1145/3517428.3544812">10.1145/3517428.3544812</a></div>
</div>
<div id="ref-potluriCodeTalkImprovingProgramming2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div class="csl-right-inline">Venkatesh Potluri, Priyan Vaithilingam, Suresh Iyengar, Y. Vidya, Manohar Swaminathan, and Gopal Srinivasa. 2018. <span>CodeTalk</span>: <span>Improving Programming Environment Accessibility</span> for <span>Visually Impaired Developers</span>. In <em>Proceedings of the 2018 <span>CHI Conference</span> on <span>Human Factors</span> in <span>Computing Systems</span></em>, <span>ACM</span>, <span>Montreal QC Canada</span>, 1–11. DOI:https://doi.org/<a href="https://doi.org/10.1145/3173574.3174192">10.1145/3173574.3174192</a></div>
</div>
<div id="ref-ramanEmacspeakSpeechInterface1996" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">T. V. Raman. 1996. Emacspeaka speech interface. In <em>Proceedings of the <span>SIGCHI Conference</span> on <span>Human Factors</span> in <span>Computing Systems</span></em> (<span>CHI</span> ’96), <span>Association for Computing Machinery</span>, <span>New York, NY, USA</span>, 66–71. DOI:https://doi.org/<a href="https://doi.org/10.1145/238386.238405">10.1145/238386.238405</a></div>
</div>
<div id="ref-sandersCocreationNewLandscapes2008" class="csl-entry" role="listitem">
<div class="csl-left-margin">[14] </div><div class="csl-right-inline">Elizabeth B.-N. Sanders and Pieter Jan Stappers. 2008. Co-creation and the new landscapes of design. <em>CoDesign</em> 4, 1 (March 2008), 5–18. DOI:https://doi.org/<a href="https://doi.org/10.1080/15710880701875068">10.1080/15710880701875068</a></div>
</div>
<div id="ref-stogerDesigningInclusiveAccessible2022" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">Bernhard Stöger, Klaus Miesenberger, Walther Neuper, Makarius Wenzel, and Thomas Neumayr. 2022. Designing an <span>Inclusive</span> and <span>Accessible Mathematical Learning Environment Based</span> on a <span>Theorem Prover</span>. In <em>Computers <span>Helping People</span> with <span>Special Needs</span></em> (Lecture <span>Notes</span> in <span>Computer Science</span>), <span>Springer International Publishing</span>, <span>Cham</span>, 47–55. DOI:https://doi.org/<a href="https://doi.org/10.1007/978-3-031-08648-9\_7">10.1007/978-3-031-08648-9\_7</a></div>
</div>
</div></section><aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>We use the identity-first language (i.e., blind people) instead of the person-first language (i.e., people with visual impairments or vision loss) when addressing this population, guided by the perspective of the National Federation of the Blind.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>In this paper, the terms integrated development environment and code editor are used interchangeably.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>see online appendix at https://github.com/jooyoungseo/assets2023_vscode<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</aside></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>